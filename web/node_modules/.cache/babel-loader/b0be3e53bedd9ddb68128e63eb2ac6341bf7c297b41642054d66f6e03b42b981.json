{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import'./DigitalHuman.css';import{useConfig}from'../../contexts/ConfigContext';import{useNotification}from'../../contexts/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DigitalHuman=_ref=>{let{modelPath}=_ref;const canvasRef=useRef(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[model,setModel]=useState(null);const{config}=useConfig();const{success,error:showError}=useNotification();// Live2D模型初始化\nuseEffect(()=>{let mounted=true;let app=null;// 如果使用EchoMimic，不加载Live2D模型\nif(config.useEchoMimic){console.log('已启用EchoMimic，跳过Live2D模型加载');setLoading(false);setError(null);return()=>{};}const initLive2D=async()=>{if(!window.PIXI||!window.PIXI.live2d){// 加载必要的脚本\nawait loadScript('https://cdn.jsdelivr.net/npm/pixi.js@6.5.2/dist/browser/pixi.min.js');await loadScript('https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js');}setLoading(true);setError(null);try{const canvas=canvasRef.current;// 创建PIXI应用\napp=new window.PIXI.Application({view:canvas,autoStart:true,backgroundAlpha:0,backgroundColor:0xffffff,resizeTo:canvas.parentElement});// 设置模型缩放模式\nwindow.PIXI.live2d.Live2DModel.registerTicker(app.ticker);// 构建完整的模型路径，快速实用的方法\nconst fullModelPath=modelPath.startsWith('/')?`${window.location.origin}${modelPath}`:`${window.location.origin}/${modelPath}`;console.log(`开始加载Live2D模型: ${fullModelPath}`);const live2dModel=await window.PIXI.live2d.Live2DModel.from(fullModelPath);// 调整模型位置和缩放\nconst scaleX=canvas.width*0.8/live2dModel.width;const scaleY=canvas.height*0.8/live2dModel.height;const scale=Math.min(scaleX,scaleY);live2dModel.scale.set(scale);live2dModel.anchor.set(0.5,0.5);live2dModel.position.set(canvas.width/2,canvas.height/2);// 创建容器并添加模型\nconst container=new window.PIXI.Container();container.addChild(live2dModel);app.stage.addChild(container);// 监听窗口大小变化\nwindow.addEventListener('resize',()=>{if(live2dModel){// 调整画布尺寸\napp.renderer.resize(canvas.parentElement.clientWidth,canvas.parentElement.clientHeight);// 重新定位模型\nlive2dModel.position.set(app.renderer.width/2,app.renderer.height/2);}});if(mounted){setModel(live2dModel);setLoading(false);success('Live2D模型加载成功');}}catch(err){console.error('加载Live2D模型失败:',err);if(mounted){setError('模型加载失败，请检查路径是否正确');setLoading(false);showError('Live2D模型加载失败，请检查路径是否正确');}}};initLive2D();return()=>{mounted=false;if(app){app.destroy(true);}};},[modelPath,success,showError,config.useEchoMimic]);// 处理服务器动画消息\nuseEffect(()=>{const handleServerMessage=event=>{const message=event.detail;// 只有当不使用EchoMimic时才处理动画\nif(message.type==='response'&&!message.useEchoMimic&&message.animation&&model){playAnimation(model,message.animation);}};window.addEventListener('server-message',handleServerMessage);return()=>{window.removeEventListener('server-message',handleServerMessage);};},[model,playAnimation]);// 播放动画\nconst playAnimation=(model,animation)=>{try{// 播放表情\nif(animation.expression){var _model$internalModel$;const expressionIndex=(_model$internalModel$=model.internalModel.motionManager.expressionManager)===null||_model$internalModel$===void 0?void 0:_model$internalModel$.expressionNames.findIndex(name=>name.toLowerCase().includes(animation.expression));if(expressionIndex!==-1&&expressionIndex!==undefined){var _model$internalModel$2;(_model$internalModel$2=model.internalModel.motionManager.expressionManager)===null||_model$internalModel$2===void 0?void 0:_model$internalModel$2.setExpression(expressionIndex);}}// 播放动作\nif(animation.motion){playMotion(model,animation.motion,animation.intensity||0.8);}}catch(error){console.error('播放动画失败:',error);}};// 播放动作\nconst playMotion=function(model,motionName){let intensity=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0.8;try{let motionGroup='Idle';switch(motionName.toLowerCase()){case'talking':motionGroup='Talk';break;case'nodding':motionGroup='Nod';break;case'thinking':motionGroup='Think';break;case'greeting':motionGroup='Greeting';break;case'surprised':motionGroup='Surprised';break;default:motionGroup='Idle';}// 查找模型中是否有对应的动作组\nconst groups=model.internalModel.motionManager.definitions;const availableGroups=Object.keys(groups);// 如果没有完全匹配的组，尝试部分匹配\nconst bestMatch=availableGroups.find(group=>group.toLowerCase().includes(motionGroup.toLowerCase()))||availableGroups[0];if(bestMatch){const availableMotions=groups[bestMatch].length;const motionIndex=Math.floor(Math.random()*availableMotions);model.motion(bestMatch,motionIndex,intensity);}}catch(error){console.error('播放动作失败:',error);}};// 加载脚本工具函数\nconst loadScript=src=>{return new Promise((resolve,reject)=>{const script=document.createElement('script');script.src=src;script.async=true;script.onload=resolve;script.onerror=reject;document.head.appendChild(script);});};return/*#__PURE__*/_jsx(\"div\",{className:\"digital-human-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"model-container\",children:[/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,id:\"live2d-canvas\"}),loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"model-placeholder\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Live2D \\u6A21\\u578B\\u52A0\\u8F7D\\u4E2D...\"})]}),error&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"model-placeholder error\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Live2D\\u6A21\\u578B\\u52A0\\u8F7D\\u5931\\u8D25\"}),/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error})]})]})});};export default DigitalHuman;","map":{"version":3,"names":["React","useEffect","useRef","useState","useConfig","useNotification","jsx","_jsx","jsxs","_jsxs","DigitalHuman","_ref","modelPath","canvasRef","loading","setLoading","error","setError","model","setModel","config","success","showError","mounted","app","useEchoMimic","console","log","initLive2D","window","PIXI","live2d","loadScript","canvas","current","Application","view","autoStart","backgroundAlpha","backgroundColor","resizeTo","parentElement","Live2DModel","registerTicker","ticker","fullModelPath","startsWith","location","origin","live2dModel","from","scaleX","width","scaleY","height","scale","Math","min","set","anchor","position","container","Container","addChild","stage","addEventListener","renderer","resize","clientWidth","clientHeight","err","destroy","handleServerMessage","event","message","detail","type","animation","playAnimation","removeEventListener","expression","_model$internalModel$","expressionIndex","internalModel","motionManager","expressionManager","expressionNames","findIndex","name","toLowerCase","includes","undefined","_model$internalModel$2","setExpression","motion","playMotion","intensity","motionName","arguments","length","motionGroup","groups","definitions","availableGroups","Object","keys","bestMatch","find","group","availableMotions","motionIndex","floor","random","src","Promise","resolve","reject","script","document","createElement","async","onload","onerror","head","appendChild","className","children","ref","id"],"sources":["/Users/niko/digital-human/frontend/src/components/DigitalHuman/index.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport './DigitalHuman.css';\nimport { useConfig } from '../../contexts/ConfigContext';\nimport { useNotification } from '../../contexts/NotificationContext';\n\nconst DigitalHuman = ({ modelPath }) => {\n  const canvasRef = useRef(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [model, setModel] = useState(null);\n  const { config } = useConfig();\n  const { success, error: showError } = useNotification();\n\n  // Live2D模型初始化\n  useEffect(() => {\n    let mounted = true;\n    let app = null;\n    \n    // 如果使用EchoMimic，不加载Live2D模型\n    if (config.useEchoMimic) {\n      console.log('已启用EchoMimic，跳过Live2D模型加载');\n      setLoading(false);\n      setError(null);\n      return () => {};\n    }\n    \n    const initLive2D = async () => {\n      if (!window.PIXI || !window.PIXI.live2d) {\n        // 加载必要的脚本\n        await loadScript('https://cdn.jsdelivr.net/npm/pixi.js@6.5.2/dist/browser/pixi.min.js');\n        await loadScript('https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js');\n      }\n      \n      setLoading(true);\n      setError(null);\n      \n      try {\n        const canvas = canvasRef.current;\n        \n        // 创建PIXI应用\n        app = new window.PIXI.Application({\n          view: canvas,\n          autoStart: true,\n          backgroundAlpha: 0,\n          backgroundColor: 0xffffff,\n          resizeTo: canvas.parentElement\n        });\n        \n        // 设置模型缩放模式\n        window.PIXI.live2d.Live2DModel.registerTicker(app.ticker);\n        \n        // 构建完整的模型路径，快速实用的方法\n        const fullModelPath = modelPath.startsWith('/') \n          ? `${window.location.origin}${modelPath}` \n          : `${window.location.origin}/${modelPath}`;\n          \n        console.log(`开始加载Live2D模型: ${fullModelPath}`);\n        const live2dModel = await window.PIXI.live2d.Live2DModel.from(fullModelPath);\n        \n        // 调整模型位置和缩放\n        const scaleX = (canvas.width * 0.8) / live2dModel.width;\n        const scaleY = (canvas.height * 0.8) / live2dModel.height;\n        const scale = Math.min(scaleX, scaleY);\n        \n        live2dModel.scale.set(scale);\n        live2dModel.anchor.set(0.5, 0.5);\n        live2dModel.position.set(canvas.width / 2, canvas.height / 2);\n        \n        // 创建容器并添加模型\n        const container = new window.PIXI.Container();\n        container.addChild(live2dModel);\n        app.stage.addChild(container);\n        \n        // 监听窗口大小变化\n        window.addEventListener('resize', () => {\n          if (live2dModel) {\n            // 调整画布尺寸\n            app.renderer.resize(canvas.parentElement.clientWidth, canvas.parentElement.clientHeight);\n            \n            // 重新定位模型\n            live2dModel.position.set(\n              app.renderer.width / 2,\n              app.renderer.height / 2\n            );\n          }\n        });\n        \n        if (mounted) {\n          setModel(live2dModel);\n          setLoading(false);\n          success('Live2D模型加载成功');\n        }\n        \n      } catch (err) {\n        console.error('加载Live2D模型失败:', err);\n        if (mounted) {\n          setError('模型加载失败，请检查路径是否正确');\n          setLoading(false);\n          showError('Live2D模型加载失败，请检查路径是否正确');\n        }\n      }\n    };\n    \n    initLive2D();\n    \n    return () => {\n      mounted = false;\n      if (app) {\n        app.destroy(true);\n      }\n    };\n  }, [modelPath, success, showError, config.useEchoMimic]);\n\n  // 处理服务器动画消息\n  useEffect(() => {\n    const handleServerMessage = (event) => {\n      const message = event.detail;\n      \n      // 只有当不使用EchoMimic时才处理动画\n      if (message.type === 'response' && !message.useEchoMimic && message.animation && model) {\n        playAnimation(model, message.animation);\n      }\n    };\n    \n    window.addEventListener('server-message', handleServerMessage);\n    \n    return () => {\n      window.removeEventListener('server-message', handleServerMessage);\n    };\n  }, [model, playAnimation]);\n\n  // 播放动画\n  const playAnimation = (model, animation) => {\n    try {\n      // 播放表情\n      if (animation.expression) {\n        const expressionIndex = model.internalModel.motionManager.expressionManager?.expressionNames.findIndex(\n          name => name.toLowerCase().includes(animation.expression)\n        );\n        \n        if (expressionIndex !== -1 && expressionIndex !== undefined) {\n          model.internalModel.motionManager.expressionManager?.setExpression(expressionIndex);\n        }\n      }\n      \n      // 播放动作\n      if (animation.motion) {\n        playMotion(model, animation.motion, animation.intensity || 0.8);\n      }\n    } catch (error) {\n      console.error('播放动画失败:', error);\n    }\n  };\n\n  // 播放动作\n  const playMotion = (model, motionName, intensity = 0.8) => {\n    try {\n      let motionGroup = 'Idle';\n      \n      switch (motionName.toLowerCase()) {\n        case 'talking':\n          motionGroup = 'Talk';\n          break;\n        case 'nodding':\n          motionGroup = 'Nod';\n          break;\n        case 'thinking':\n          motionGroup = 'Think';\n          break;\n        case 'greeting':\n          motionGroup = 'Greeting';\n          break;\n        case 'surprised':\n          motionGroup = 'Surprised';\n          break;\n        default:\n          motionGroup = 'Idle';\n      }\n      \n      // 查找模型中是否有对应的动作组\n      const groups = model.internalModel.motionManager.definitions;\n      const availableGroups = Object.keys(groups);\n      \n      // 如果没有完全匹配的组，尝试部分匹配\n      const bestMatch = availableGroups.find(group => \n        group.toLowerCase().includes(motionGroup.toLowerCase())\n      ) || availableGroups[0];\n      \n      if (bestMatch) {\n        const availableMotions = groups[bestMatch].length;\n        const motionIndex = Math.floor(Math.random() * availableMotions);\n        model.motion(bestMatch, motionIndex, intensity);\n      }\n    } catch (error) {\n      console.error('播放动作失败:', error);\n    }\n  };\n\n  // 加载脚本工具函数\n  const loadScript = (src) => {\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = src;\n      script.async = true;\n      script.onload = resolve;\n      script.onerror = reject;\n      document.head.appendChild(script);\n    });\n  };\n\n  return (\n    <div className=\"digital-human-section\">\n      <div className=\"model-container\">\n        <canvas ref={canvasRef} id=\"live2d-canvas\"></canvas>\n        \n        {loading && (\n          <div className=\"model-placeholder\">\n            <i className=\"fas fa-spinner fa-spin\"></i>\n            <p>Live2D 模型加载中...</p>\n          </div>\n        )}\n        \n        {error && !loading && (\n          <div className=\"model-placeholder error\">\n            <i className=\"fas fa-exclamation-triangle\"></i>\n            <p>Live2D模型加载失败</p>\n            <p className=\"error-message\">{error}</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DigitalHuman;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}